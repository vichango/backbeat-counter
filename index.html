<html>
    <head>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="w-screen h-screen bg-blue-200">
        <div class="flex w-full justify-center">
            <div id="app" class="w-1/2 py-10">
                <button
                    class="w-full button border-2 rounded p-12 border-blue-500 text-blue-500 text-2xl" @click="addBeat">Tap</button>
    
                <!-- <p>Beat: {{ null === beatCounter ? '—' : (beatCounter + 1) }}</p> -->
                <p class="text-center text-blue-500 text-lg mt-6">Beat</p>
                <table class="w-full my-4">
                    <tr>
                        <td
                            v-for="(n, i) in 8"
                            :key="`beat-${i}`"
                            :class="['text-center text-blue-200 p-4', i === beatCounter ? 'bg-blue-500' : 'bg-blue-100']">
                            {{ i + 1 }}
                        </td>
                    </tr>
                </table>

                <!-- <p>Eight: {{ null === eightCounter ? '—' : eightCounter + 1 }}</p> -->
                <p class="text-center text-blue-500 text-lg mt-6">Huit</p>
                <table class="w-full my-4">
                    <tr>
                        <td
                            v-for="(n, i) in 4"
                            :key="`eight-${i}`"
                            :class="['text-center text-blue-200 p-4', i === eightCounter ? 'bg-blue-500' : 'bg-blue-100']">
                            {{ i + 1 }}
                        </td>
                    </tr>
                </table>

                <!-- <p>Phrase: {{ null === phraseCounter ? '—' : phraseCounter + 1 }}</p> -->
                <p class="text-center text-blue-500 text-lg mt-6">Phrase</p>
                <table class="w-full my-4">
                    <tr>
                        <td
                            v-for="(phrase, i) in phrases"
                            :key="`phrase-${i}`"
                            :class="['text-center text-blue-200 p-4', i === phraseCounter ? 'bg-blue-500' : 'bg-blue-100']">
                            {{ phrase }}
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <script>
            const { createApp, computed, ref } = Vue;
            
            const App = {
                data() {
                    return {
                        beatCounter: null,
                        eightCounter: null,
                        phraseCounter: null,
                        phrases: ['A', 'A', 'B', 'A'],
                    }
                },
                computed: {
                    phraseName() {
                        return null === this.phrasePointer ? null :this. phrases[this.phrasePointer];
                    }
                },
                methods: {
                    addBeat() {
                        console.log('beat', this.beatCounter, this.eightCounter, this.phraseCounter);

                        this.beatCounter = null === this.beatCounter ? 0 : (this.beatCounter + 1) % 8;

                        if (0 === this.beatCounter) {
                            this.eightCounter = null === this.eightCounter ? 0 : (this.eightCounter + 1) % 4;

                            if (null === this.phraseCounter) {
                                this.phraseCounter = 0;
                            } else if (0 === this.eightCounter) {
                                this.phraseCounter = (this.phraseCounter + 1) % this.phrases.length;
                            }
                        }
                    }
                }
            }
        
            const app = createApp(App)
            app.mount("#app");
        </script>
    </body>
</html>
